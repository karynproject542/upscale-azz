<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Azzoriginal HD Upscale</title>
  <style>
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Poppins,system-ui,Segoe UI,Roboto,Arial;
      background: linear-gradient(135deg,#000,#111);
      color:#FFD700;display:flex;align-items:center;justify-content:center;
      min-height:100vh;padding:24px;
    }
    .card{
      width:100%;max-width:760px;background:#0b0b0b;border-radius:14px;
      padding:28px;border:1px solid rgba(255,215,0,0.08);box-shadow:0 8px 30px rgba(0,0,0,0.6);
    }
    h1{margin:0 0 8px;font-size:24px}
    p.lead{margin:0 0 20px;color:#d4b84a}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .col{flex:1;min-width:220px}
    .upload {
      border:2px dashed rgba(255,215,0,0.12);padding:16px;border-radius:10px;text-align:center;
      background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);
    }
    input[type=file]{display:none}
    label.btn{
      display:inline-block;padding:10px 16px;border-radius:8px;background:#FFD700;color:#000;font-weight:600;cursor:pointer;
    }
    button.action{
      background:#FFD700;border:none;padding:10px 16px;border-radius:8px;color:#000;font-weight:700;cursor:pointer;
    }
    .preview{margin-top:12px;max-width:100%;border-radius:8px;border:1px solid rgba(255,215,0,0.08)}
    .status{margin-top:12px;color:#cfc27a}
    .result-img{margin-top:16px;max-width:100%;border-radius:12px;display:block}
    .controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:12px}
    a.download{display:inline-block;padding:8px 12px;background:rgba(255,215,0,0.18);color:#FFD700;border-radius:8px;text-decoration:none}
    footer{margin-top:18px;color:#9f8f3a;font-size:13px;text-align:center}
    @media (max-width:600px){ .row{flex-direction:column} }
  </style>
</head>
<body>
  <div class="card">
    <h1>ü™Ñ Azzoriginal HD Upscale</h1>
    <p class="lead">Upload gambar JPG/PNG dari HP/PC ‚Äî server akan memperbesar resolusi secara otomatis.</p>

    <div class="row">
      <div class="col upload">
        <form id="form">
          <input id="file" type="file" accept="image/*" />
          <label for="file" class="btn">Pilih Gambar</label>
        </form>
        <div class="status" id="status">Belum ada file.</div>
        <div class="controls" id="controls" style="display:none;">
          <button class="action" id="startBtn">Proses HD</button>
          <a class="download" id="downloadBtn" href="#" download style="display:none;">Download Hasil</a>
        </div>
        <img id="preview" class="preview" style="display:none"/>
      </div>

      <div class="col" id="resultCol">
        <div id="resultArea" style="min-height:220px;display:flex;align-items:center;justify-content:center;flex-direction:column">
          <div style="color:#bfa74a">Hasil akan muncul disini setelah proses selesai</div>
        </div>
      </div>
    </div>

    <footer>Powered by Azzoriginal ‚Ä¢ Jangan upload konten ilegal</footer>
  </div>

<script>
const fileInput = document.getElementById('file');
const status = document.getElementById('status');
const preview = document.getElementById('preview');
const controls = document.getElementById('controls');
const startBtn = document.getElementById('startBtn');
const downloadBtn = document.getElementById('downloadBtn');
const resultArea = document.getElementById('resultArea');

let selectedFile = null;

fileInput.addEventListener('change', () => {
  const f = fileInput.files[0];
  if (!f) return;
  selectedFile = f;
  preview.src = URL.createObjectURL(f);
  preview.style.display = 'block';
  status.innerText = f.name + ' ‚Ä¢ ' + Math.round(f.size/1024) + ' KB';
  controls.style.display = 'flex';
  downloadBtn.style.display = 'none';
});

startBtn.addEventListener('click', async () => {
  if (!selectedFile) return alert('Pilih gambar dulu bro!');
  status.innerText = '‚è≥ Mengunggah dan memproses...';
  startBtn.disabled = true;

  try {
    const form = new FormData();
    form.append('file', selectedFile);

    const res = await fetch('/api/upscale', { method: 'POST', body: form });
    if (!res.ok) {
      const txt = await res.text();
      throw new Error(txt || 'Server error');
    }
    const json = await res.json();
    if (!json.status) throw new Error(json.message || 'Gagal');

    // tampilkan hasil
    resultArea.innerHTML = '';
    const img = document.createElement('img');
    img.src = json.result;
    img.className = 'result-img';
    resultArea.appendChild(img);

    downloadBtn.href = json.result;
    downloadBtn.style.display = 'inline-block';
    status.innerText = '‚úÖ Selesai!';
  } catch (err) {
    console.error(err);
    status.innerText = '‚ùå Error: ' + (err.message || err);
    resultArea.innerHTML = '<div style="color:#ff9a9a">Proses gagal. Coba ulang atau pakai gambar lain.</div>';
  } finally {
    startBtn.disabled = false;
  }
});
</script>
</body>
</html>
